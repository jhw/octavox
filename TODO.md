### short

- remove src from filestub
- equalizers
- tool to dump table of samples

### medium

- filestub and suffix should be generated in same place

- sample mutation
- sample stickiness
- rename s3 bucket
- cli [notes]

### long

- sample blacklist
- vitling 303
- city dreams bass
- euclidian/bjorklund beats
- sunvox reverb chords
- repeats
- caught_on_tape 808/909 sampes
- sunvox kicker
- noise hats

### thoughts

- stop inferring channel key from sampler mod name ?
  - seems okay as things are
- svdrum sample chain ?
  - very little added value
- `purge` option to remove samples unwanted by patterns ?
  - no it's over- optimisation
- add pattern shuffle option to mutator ?
  - no; think it's just the same as pattern mutation
- remove custom pattern format ?
  - no it seems useful
- patch names (noun, adj) ?
  - might not be relevant in new cli world
- pico UI classifier gist ?
  - not clear it's better than the existing script
- banks wrapper to load wavs+curated/index ?
  - not clear they should be the same object
- use kick, snare etc key names ?
  - too much of a pain given samples use the same
- degrade ?
  - not sure it really fits 
- s&h volatility parameter ?
  - doesn't quite seem to fit here
- merge blender into mutator ?
  - blender hasn't really come up with anything good at this stage
- consider replacing keys with mutes ?
  - probably sub- optimal at this stage
- binary s&h ? 
  - think is too extreme
  - better to have a large range of mutator outputs
- center modules on grid center rather than output ?
  - probably not worth it now
- s3 utils for favourites ?
  - may require pico samples refactoring
  - feels like you shouldn't save and should keep everything ephemeral for now
- script to dump samples mapping ?
  - feels like overkill for now
- output format versioning  ?
  - feels like overkill for now
- ability to fix/specify certain samples ?
  - feels like overkill for now
- coloured modules ? 
  - overkill
- modules are overlapping ?
  - is a window boundary thing
- turn down svdrum samples ?
  - no; not worth it; just manually turn down SVDrum volume in UI
- pass keys to samples ?
  - no because sample keys are different from machine keys - oh/ch etc
- check why kick samples have id variation even at low temp
  - its the hat line not the kick line!
- blender script ?
  - not clear its useful
- validate trigs against module config ?
  - no one will ever use this apart from u so seems overkill
- echo wet on/off style ?
  - seems too explicit
- per- machine SVDrum/Sampler modules ?
  - probably overkill
  - would be useful for sv- level muting but that's really the OT's job
- initialise vitling generator with specific set of styles ? 
  - no because style info is part of machine
- mutes ?
  - don't think its consistent with cli options for different channels
- degrade ?
  - don't think it's really consistent with slices

### done

- nouns and adjectives in filenames
- initialise different samplers using different sample_keys values
- increase randomiser nbeats
- refactor sample_keys to work on per- channel basis
- refactor vitling note module name to include channel prefix
- define new samplers and links 
  - separate oh, ch samplers
- initialise mod classes within dom using partials
  - remove module imports at render level
- partial instantiation
  - https://stackoverflow.com/questions/38911146/python-equivalent-of-functools-partial-for-a-class-constructor
- sort sample keys properly
- combine modconfig, modclassconfig
- pass modules to link_modules
- replace refs to proj.modules with internal modmap
- renamed rendered/patchchain.py as renderer.py
- refactor variable names within renderer
- pass around mod class only in dict, not nested dict with id and class
- abstract note rendering code into sampler 
- SVTrig rendering to call sample renderer if `id` key not present in trig
- renderer internal module representation to be a dict with values i and class
- sampler to initialise samplers on construction
- include banks in sampler kwargs
- remove patches from initialisation
- remove SVPatches [notes]
- remove filter_samples
- pass delta dit to mutator
- remove multiple mutation index
- move mutation into track
- pico bank to extend bank, embed index and include random helpers
- merge clap and snare handlers
- move random wild into bank
- remove svdrum module
- revert degrade
- pass degrade parameter from randomiser/mutator
- pass degrade as part of vitling kwargs
- implement degrade at add() level
- cli (shorthand) int array option
- mutator to accept int array
- mutator to randomise mutes
- randomiser should no longer accept keys
- convert pattern to string format and add expand method
- replace yaml dump with json + indentation
- sample randomiser [renamed] belongs in /samplebeats
- mutator only accepts default profile
- replace randomisers dict with single randomiser
- mutator to load sample randomiser and generate random samples
- randomise samples
- add dsample variable
- expose mutator options as kwargs
- pass mutes to tracks
- tracks to store keys

```
import sys
if len(sys.argv) >= 2:
    cliconf[0]["pattern"]=sys.argv[1]
```

- per- beat volume
- tune down load SVDrum
- remove pydub
- increase number of mutator options
- remove compressor
- remove mutator breaks option
- check OT BPM for compressed/uncompressed exports
- blender script
- document sunvox -> octa workflow
- export to wav file in new wav dir
- new compressor cli config
- compress and remove breaks
- check playing
- refactor mutator to remove breaks option, remove breaks for standard file and insert breaks for decompiled file
- remove all files
- randomise and mutate favourite
- dump to mutator-decompiled
- decompile all patches into a list
- then have a custom grid structure which takes number of cols and allows you to rotate and flatten 
- decompiler code
- remove three way iteration in renderer
- zip modnames and coords
- center on Output
- implement layout manager
- ensure cloning deep copies objects
- pre- expand patterns
- new Patterns class
  - better randomisation options
- is keys really required as part of state ?
  - why not just iterate over patterns ?
- add breaks option to randomiser, mutator
- pass slicetemp to mutator
- helper method for random pattern selection
- slicetemp
- patch breaks
- don't like the way pattern iterates over keys
- order track rendering
- keys must affect machine creation and not just rendering
- mutuator must iterate over machines
- mute option may need to blank volume rather than not- render if mutations are to work
- pass kk/sn/ht/sh as cli options
- construct mod classes dynamically
- rename FXGenerator as SampleHoldGenerator
- replace floor/ceil with limits
- abstract renderer
- rename modular as modconfig
- pass new modclasses arg as string:class dict
- abstract project as module
  - import sv classes into dom
- refactor effect note :value attribute
  - what does trig use ?
- test echo wet
- add echo feedback
- check renderer attr vs ctrl
- complete sample_hold implementation
- complete add implementation
- define echo machine
- convert machines to list
- remove styles from machine
- per- machine patterns
- add back patterns from master
- renamed pattern initialise as pattern expand
- pattern initialise
- pattern dsl
- reduce n to 1 by default
- include n within pattern definition
- add back irregular patterns
- pattern class and multipler
- n(slice)beats to be set at Tracks level
- simplify slice rendering
- embed styles in machine
- remove machines key
- machines as dict
- move slice iteration into tracks
- vitling should add explicit key
- notes should be a list not dict
- genericise passing of kwargs to generators
- include generators within mapping
- rename generator
- rename struct
- replace iteration over hardcoded keys with machine config
- add back sampler protection against fx trigs
- hats 
- rename struct as notes
- refactor generator / notes relationship so notes are passed to generator and generator is stateless
- notes.add method
- remove eval/hungarorise
- merge mapping and styles
- remove trig key (name/type) and replace with key
- merge offbeats open/closed
- trig patterns must pass key to add() function
- replace trignote with standard dict
- replace nested notes with single dict
- required trig names 
  - remove default name
- remove machine key from expansion keys
- remove machine.initialise
- single machine class
- remove machine classes
- generator to be passed as a closure
- generator to return type and notes.expand() to group according to type
- TrigNote to add type variable
- Notes to cluster and render based on type variable
- TrigNote class
- add basic notes class
- add intermediate representation with separate() method
- remove tracks
- remove hats
- re- merge trig rendering code
- simplify patch nomenclature
- remove fx
- reduce reverb to 4
- hungarorise machine names
- add fx pattern randomisation to mutator
- check if/why FX generator needs step
- pass different max levels to echo wet and feedback
- simplify s&h machine
- check mutator still works
- dual patterns
- combine slice render_trigs/effects
  - need to fix id issue
- combine track render_trigs/effects
- fx seeds not being reset
  - check if EffectPattern is required
- re- test mutator
- remove player keys; iterate over machine.players
- move trig rendering into slice and then into machine 
- allow machines to render both notes and fx
- embed rendering in machines
- remove randomise_style
- see if machine classes can be simplified
- simplify MachineConfig
- refactor init_machine
- check randomiser yaml output
- check mutator works
- refactor machines contructor
  - must be able to take json input
  - randomisation to randomise inputs only
- check saved yaml file
- do you still need a Players class
  - what happens to to_map
- replace rootstyle with style
  - all machines to take constructor args
- test mutator
- comment out closed/empty and offbeats open initial beat, check offbeats open/closed are synchronised properly
- kick and snare samples seem to be the same
- remove TrigStyles
- clients to iterate over Machines.flatten
- Machines.flatten to return list of players
- add hats- specific logic to MachineGroup.randomise_styles/seed
  - maybe HatsMatchineGroup class ?
- Machines.randomise to genereate joint hats group
- Machines.randomise to generate one MachineGroup per Machine
- move Machine sample/seed randomisations into MachineGroup
  - no direct access to machine
- new MachineGroup class 
  - extends list
- move trigs and FX into dom and simplify
- remove refs to "trigs" from dom
- get rid of trigmap
- rename trigs as instruments
- track mutes
- convert blender to use new file lookup
- change cli file stuff to accept pattern
- add profile as enum
- move profiles into randomiser
